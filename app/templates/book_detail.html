{% extends "base.html" %}
{% block content %}
  <section class="hero">
    <div class="card">
      <h2>{{ book['title'] }}</h2>
      <p><strong>{{ book['author'] or "Unknown author" }}</strong></p>
      <p class="note">{{ book['path'] }}</p>
      <a class="btn btn-outline btn-small" href="/search?title={{ book['title']|urlencode }}&author={{ (book['author'] or '')|urlencode }}">Search Google Books</a>
    </div>
    <div class="card">
      <h3>Tags</h3>
      <form class="tag-form" method="post" action="/ui/books/{{ book['id'] }}/tags">
        <input class="input" type="text" name="tags" placeholder="Add tags, comma separated" />
        <button class="btn btn-outline btn-small" type="submit">Add</button>
      </form>
      <div class="tag-list">
        {% for tag in tags %}
          <div class="tag-pill">
            <a href="/ui/books?tag_id={{ tag['id'] }}">{{ tag['name'] }}</a>
            <form method="post" action="/ui/books/{{ book['id'] }}/tags/{{ tag['id'] }}/remove">
              <button class="tag-remove" type="submit" aria-label="Remove tag {{ tag['name'] }}">&times;</button>
            </form>
          </div>
        {% else %}
          <p class="note">No tags yet. Add the first one.</p>
        {% endfor %}
      </div>
    </div>
    <div class="card">
      <h3>Cover</h3>
      <p class="note">No cover detected.</p>
    </div>
  </section>

  <section class="section">
    <div class="card">
      <h3>Files</h3>
      <table class="table">
        <thead>
          <tr>
            <th>Path</th>
            <th>Size</th>
            <th>Modified</th>
          </tr>
        </thead>
        <tbody>
          {% for file in files %}
            <tr>
              <td>{{ file['path'] }}</td>
              <td>{{ file['size'] }}</td>
              <td>{{ file['modified'] }}</td>
            </tr>
          {% else %}
            <tr>
              <td colspan="3" class="note">No files attached to this book.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
{% endblock %}
